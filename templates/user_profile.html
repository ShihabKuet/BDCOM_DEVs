<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ user.username if user else 'User Profile' }}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/user_profile.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/navbar.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/footer.css') }}">
</head>
<body>
  {% include 'navbar.html' %}

  <div class="profile-wrapper">
    <div class="running-text">
      <span>âš¡ This profile feature is under development. You may face some bugs, but updates are on the way. Stay tuned!</span>
    </div>

    <!-- Profile Header -->
    <div class="profile-header">
      <div class="avatar">
        {{ user.username[0]|upper if user and user.username else "A" }}
      </div>
      <h1>{{ user.username or "Anonymous User" }}</h1>
      <p class="ip-info">ğŸ“¡ IP Address: {{ current_ip }}</p>
    </div>

    <!-- Stats Section -->
    <div class="stats-grid">
      <div class="stat-card">
        <h3>ğŸ“ Posts</h3>
        <p>{{ user_posts|length }}</p>
      </div>
      <div class="stat-card">
        <h3>ğŸ“Œ Followed</h3>
        <p>{{ followed_posts|length if followed_posts else 0 }}</p>
      </div>
      <div class="stat-card">
        <h3>âš¡ Member Since</h3>
        <p>Unknown</p>
        <!-- <p>{{ user.created_at.strftime('%b %Y') if user and user.created_at else "Unknown" }}</p> -->
      </div>
    </div>

    <!-- Main Content Grid -->
    <div class="main-grid">
      <!-- Your Posts -->
      <div class="your-posts glass-card">
        <h2>ğŸ“ Your Posts</h2>
        {% if user_posts %}
          <ul class="post-list-modern">
            {% for post in user_posts %}
            <li class="post-card">
              <a href="{{ url_for('get_post', post_id=post.id) }}">
                <div class="post-info">
                  <div class="post-title">{{ post.title }}</div>
                  <div class="post-meta">
                    <span>ğŸ“… (date not available)</span>
                    <span>ğŸ’¬ {{ post.comments|length }} Comments</span>
                  </div>
                </div>
              </a>
            </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="empty-state">You havenâ€™t created any posts yet.</p>
        {% endif %}
      </div>

      <!-- Followed Posts -->
      <div class="followed-posts glass-card">
        <h2>ğŸ“Œ Followed Posts</h2>
        {% if followed_posts %}
          <ul class="post-list-modern">
            {% for post in followed_posts %}
            <li class="post-card">
              <a href="{{ url_for('get_post', post_id=post.id) }}">
                <div class="post-title">{{ post.title }}</div>
                <div class="post-meta">ğŸ‘¤ {{ post.submitted_by }}</div>
              </a>
            </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="empty-state">You are not following any posts yet.</p>
        {% endif %}
      </div>
    </div>
  </div>

  {% include 'footer.html' %}
</body>
</html>
