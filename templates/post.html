<!DOCTYPE html>
<html>
<head>
    <title>{{ post.title }} - BDCOM Devs Forum</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/navbar.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/footer.css') }}">
    <!-- Quill Editor -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
</head>
<body>

    {% include 'navbar.html' %}
    
    <div class="post-single">
        <h1>{{ post.title }}</h1>
        <div class="{{ post.type }} post-type">{{ post.type.upper() }}</div>
        <div class="post-body">{{ post.content | safe }}</div>

        <div class="post-actions-single">
            <button class="editBtn" onclick="startEdit()">✏️ Edit</button>
            <button class="deleteBtn" onclick="deletePost({{ post.id }})">🗑️ Delete</button>
        </div>

        <form id="editForm" style="display:none;" onsubmit="submitEdit(event, {{ post.id }})">
            <input type="text" id="editTitle" value="{{ post.title }}" required><br><br>
            <!-- Hidden preloaded HTML for JavaScript to set into Quill -->
            <div id="editContentRaw" style="display: none;">{{ post.content|safe }}</div>
            <!-- Quill editor container -->
            <div id="edit-quill-container" style="height: 200px;"></div>
            <input type="hidden" id="editContent">
            <br><br>
            <label><input type="radio" name="editType" value="problem" {% if post.type == 'problem' %}checked{% endif %}> Problem</label>
            <label><input type="radio" name="editType" value="solution" {% if post.type == 'solution' %}checked{% endif %}> Solution</label><br><br>
            <button type="submit" class="saveEditBtn">💾 Save</button>
            <button type="button" class="cancelEditBtn" onclick="cancelEdit()">✖️ Cancel</button>
        </form>

        <br>

        <div class="comments-section">
            <h3>Comments</h3>
            <div id="comments-container"></div>

            <form id="commentForm">
                <textarea id="commentContent" placeholder="Write a comment..." required></textarea><br>
                <button type="submit">Submit Comment</button>
            </form>
        </div>

        <br>

        <a href="{{ url_for('index') }}">← Back to Forum</a>
    </div>

    {% include 'footer.html' %}

    <script src="{{ url_for('static', filename='js/posts.js') }}"></script>
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
</body>
</html>
